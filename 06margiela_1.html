<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EFFÉ</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="EFFE.css" />
    <link rel="stylesheet" href="reset.css" />
</head>
<body>
    <div id="header"></div>
    <section class="margielaI01">
        <div class="margielaILogo"><img src="./source_05MAISON_MARGIELA/logo_white.png" alt="logo"></div>
        <div class="margielaILogoSen">The Poetry of the Ordinary</div>
        <div class="margielaIMain"><video autoplay muted src="./source_05MAISON_MARGIELA/559.mp4"></video></div>
        <div class="margielaIValue">
            <div class="lineH"></div>
            <div class="margielaIVText">“Deconstructing norms, expressing identity through unexpected olfactory encounters.”</div>
            <div class="lineH"></div>
        </div>
    </section>
    <section class="margielaI02">
        <div class="margielaCBox">
            <div class="margielaCText">Memory in a Bottle</div>
            <div class="margielaCImg01"><img src="./source_05MAISON_MARGIELA/537.jpg" alt="img"></div>
        </div>
        <div class="margielaCBox">
            <div class="margielaCImg02"><img src="./source_05MAISON_MARGIELA/622.jpg" alt="img"></div>
            <div class="margielaCText">Memory of Style</div>
        </div>
        <div class="lineV"></div>
    </section>
    <section class="margielaI03">
        <div class="flipCardM">
            <div class="flipCardInM">
                <div class="flipFrontM">
                    <div class="frontImgM"><img src="./source_05MAISON_MARGIELA/Lazy_Sunday_Morning.jpeg" alt="img"></div>
                </div>
                <div class="flipBackM">
                    <div class="lineH"></div>
                    <div>Lazy Sunday Morning</div>
                    <div>x</div>
                    <div>soft | musky | intimate comfort</div>
                    <div class="lineH"></div>
                </div>
            </div>
        </div>
        <div class="flipCardM">
            <div class="flipCardInM">
                <div class="flipFrontM">
                    <div class="frontImgM"><img src="./source_05MAISON_MARGIELA/Jazz_Club.jpeg" alt="img"></div>
                </div>
                <div class="flipBackM">
                    <div class="lineH"></div>
                    <div>Jazz Club</div>
                    <div>x</div>
                    <div>smoky | amber | nostalgia</div>
                    <div class="lineH"></div>
                </div>
            </div>
        </div>
        <div class="flipCardM">
            <div class="flipCardInM">
                <div class="flipFrontM">
                    <div class="frontImgM"><img src="./source_05MAISON_MARGIELA/Sailing_Day.png" alt="img"></div>
                </div>
                <div class="flipBackM">
                    <div class="lineH"></div>
                    <div>Sailing Day</div>
                    <div>x</div>
                    <div>marine | freedom | crystal clarity</div>
                    <div class="lineH"></div>
                </div>
            </div>
        </div>
    </section>
    <section class="margielaI04">
        <div class="lineV"></div>
        <div class="margielaFSen">
            conceptual · nostalgic · modern minimalism
        </div>
        <div class="lineH"></div>
        <div class="margielaFImgBox">
            <div class="margielaFImg">
                <img src="./source_05MAISON_MARGIELA/03.jpg" alt="img">
            </div>
            <div class="margielaFImg">
                <img src="./source_05MAISON_MARGIELA/07.jpg" alt="img">
            </div>
        </div>
        <div class="lineH"></div>
    </section>
    <section class="margielaI05">
        <div class="margielaIMapText">MAISON MARGIELA Flagship Store</div>
        <div class="mapTypeBox">
            <button onclick="setOverlayMapTypeId('traffic')">실시간 교통정보 보기</button> 
            <button onclick="setOverlayMapTypeId('bicycle')">자전거도로 보기</button>
            <button onclick="window.open('https://map.kakao.com/link/to/MAISON MARGIELA Flagship Store,37.5342387, 127.0021508')">길찾기 바로가기</button>
        </div> 
        <div class="margielaMap"></div>
        <div class="searchBox">
            <input type="text" id="keyword" placeholder="장소를 검색하세요">
            <button id="searchBtn">검색</button>
        </div>
        <div class="lineH"></div>
    </section>
    <div id="footer"></div>

<script type="text/javascript" src="EFFE.js"></script>
<script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=1ce51ad03576a5eb772af03ad556cda2&libraries=services,clusterer,drawing&autoload=false"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
    kakao.maps.load(() => {

        // 지도 생성
        const mapContainer = document.querySelector('.margielaMap');
        const mapOption = { center: new kakao.maps.LatLng(37.5342387, 127.0021508), level: 3 };
        const map = new kakao.maps.Map(mapContainer, mapOption);

        // 마커 & 인포윈도우
        const margielaPosition = new kakao.maps.LatLng(37.5342387, 127.0021508);
        const margielaMarker = new kakao.maps.Marker({ map, position: margielaPosition });
        const margielaInfo = new kakao.maps.InfoWindow({
        content: '<div style="padding:8px;font-size:13px;">MAISON MARGIELA Flagship Store<br>서울특별시 용산구 한남동 657-91 -</div>'
        });
        margielaInfo.open(map, margielaMarker);

        // 검색 관련 객체 선언 (누락되었던 부분)
        const ps = new kakao.maps.services.Places();
        const infowindow = new kakao.maps.InfoWindow({ zIndex: 1 });
        let markers = [];

        // 지도 컨트롤
        const mapTypeControl = new kakao.maps.MapTypeControl();
        map.addControl(mapTypeControl, kakao.maps.ControlPosition.TOPLEFT);
        const zoomControl = new kakao.maps.ZoomControl();
        map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);

        // 지도타입 버튼 기능
        window.currentTypeId = null;
        window.setOverlayMapTypeId = function(maptype) {
        let changeMaptype;
        if (maptype === 'traffic') changeMaptype = kakao.maps.MapTypeId.TRAFFIC;
        else if (maptype === 'bicycle') changeMaptype = kakao.maps.MapTypeId.BICYCLE;

        if (window.currentTypeId) map.removeOverlayMapTypeId(window.currentTypeId);
        map.addOverlayMapTypeId(changeMaptype);
        window.currentTypeId = changeMaptype;

        margielaInfo.open(map, margielaMarker);
        };

        // 검색 버튼 이벤트
        document.getElementById('searchBtn').addEventListener('click', () => {
        const keyword = document.getElementById('keyword').value.trim();
        if (!keyword) {
            alert('검색어를 입력하세요!');
            return;
        }
        ps.keywordSearch(keyword, placesSearchCB);
        });

        // 검색 콜백
        function placesSearchCB(data, status) {
        if (status === kakao.maps.services.Status.OK) {
            markers.forEach(marker => marker.setMap(null));
            markers = [];

            const bounds = new kakao.maps.LatLngBounds();
            data.forEach(place => {
            const marker = new kakao.maps.Marker({
                map,
                position: new kakao.maps.LatLng(place.y, place.x)
            });
            markers.push(marker);

            kakao.maps.event.addListener(marker, 'click', function() {
                infowindow.setContent(
                `<div style="padding:5px;font-size:13px;">${place.place_name}</div>`
                );
                infowindow.open(map, marker);
            });

            bounds.extend(new kakao.maps.LatLng(place.y, place.x));
            });

            map.setBounds(bounds);
        } else {
            alert('검색 결과가 없습니다.');
        }
        }
    });
    });
</script>
</body>
</html>